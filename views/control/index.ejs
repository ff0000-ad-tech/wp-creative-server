<!doctype html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="/shared/styles.css">
	<link rel="stylesheet" href="/control/styles.css">

	<script>
	</script>	
</head>

<body>
	<div id="panel">
		<h1><a href=""><%= creativeName; %></a></h1>
		<ul id="files" class="view-details">
			<li class="header">
				<span class="index-col column">Builds</span>
				<span class="hierarchy-grid"></span>
				<span class="watching-col column">Compiling</span>
				<span class="last-deploy-col column">Deployed</span>
			</li>

			<%
			Object.keys(targets).forEach((size) => {
			%>
		</ul>
		<div class="ads">
			<div class="ad">
				<div class="ad-size"><%= size; %></div>
				<%
				targets[size].forEach((index, i) => {	
					var childCss = i < targets[size].length - 1 ? 'next-child' : 'last-child';
					var toggleRoute, watchingCss;
					if (index.isWatching) {
						toggleRoute = '/api/stop-watching?size=' + size + '&index=' + index.name;
						watchingCss = 'watching';
					}
					else {
						toggleRoute = '/api/start-watching?size=' + size + '&index=' + index.name;
						watchingCss = 'not-watching';
					}

				%>
				<div class="ad-index clear-after">
					<div class="hierarchy-grid <%= childCss; %>"></div>
					<div class="index-col column">
						<div class="col-vert-nudge"><%= index.name; %></div>
					</div>
					<div class="watching-col column">
						<a href="<%= toggleRoute; %>"><div class="<%= watchingCss; %>"></div></a>
					</div>
					<div class="deploy-col column"></div>
					<div class="last-deploy-col column">
						<div class="col-vert-nudge"><%= index.lastDeployAt; %></div>
					</div>
				</div>
				<%
				});
				%>
			</div>
			<%
			});			
			%>
		</div>

	</div>
</body>
</html>